+++
Description = ""
Tags = []
date = "2015-12-22T23:26:17+02:00"
title = "Design"
menu = "main"
draft = true
+++

## Overview

<span class="appname">SnabbWall</span> is a *modular*, *application-level* (Layer-7) firewall *suite* for [Snabb Switch](http://snabb.co).

As a *modular* system, it provides a set of components which can be reused in other Snabb Switch designs.

As an *application-level* (Layer-7) firewall, it is able to:

* Inspect network traffic and detect flows of related data, and pinpoint which application has produced a certain data flow.
* Filter (drop, reject, or accept) packets using criteria specified in a set of rules, which can use the information inferred by inspecting the packets.

As a *suite*, it includes a complete firewall program out of the box.


## Architecture

<span class="appname">SnabbWall</Span> takes advantage of the [separation in functional components](https://github.com/SnabbCo/snabbswitch/blob/master/src/README.md#introduction), called *applications* in Snabb Switch jargon. The following diagram contains a simplified view of the system:

{{< figure src="/images/diagrams/arch-blocks.png" caption="Building blocks" >}}

The main components are **L7 Spy** and **L7 Firewall**, both are Snabb Switch applications:

* **L7 Spy** inspects ingress network traffic, identifies related packets to group them in a *related data flow*, and —if possible— determines which application has generated the data flow. This is done with the aid of the [nDPI](http://www.ntop.org/products/deep-packet-inspection/ndpi/) packet inspection library. The information gathered is attached to each packet as *metadata*, and the packets are passed through unmodified.
* **L7 Firewall** receives a set of filtering *rules*, tries to match ingress packets with each rule, and performs its associated action. The rules can perform matches on the metadata generated by the *L7 Spy* application.


## Applications

### L7 Spy

{{< figure src="/images/diagrams/app-l7spy.png" caption="L7 Spy application" >}}

### L7 Firewall

{{< figure src="/images/diagrams/app-l7fw.png" caption="L7 Firewall application" >}}


## Programs

The <span class="appname">SnabbWall</span> suite ships with a ready to use program which uses the [L7 Spy]({{< ref "#l7-spy" >}}) and [L7 Firewall]({{< ref "#l7-firewall" >}}) applications to implement a Layer-7 stateful firewall.



